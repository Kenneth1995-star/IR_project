Carry On Spying

A top-secret chemical formula has been stolen by STENCH (the Society for the Total Extinction of Non-Conforming Humans). Fearful of the formula falling into the wrong hands, the chief of the Secret Service reluctantly sends the only agent he has left, the bumbling and silly Agent Desmond Simpkins (Kenneth Williams), and his three trainees—Agent Harold Crump (Bernard Cribbins), Agent Daphne Honeybutt (Barbara Windsor), and Agent Charlie Bind (Charles Hawtrey)—to retrieve the formula.
The agents travel separately to Vienna, where each makes contact with Carstairs (Jim Dale), who assumes a different disguise each time. Next, they rendezvous at the Cafe Mozart and later travel on to Algiers. Upon the way, they encounter STENCH agents, the Fat Man and Milchmann (who stole the formula whilst disguised—befitting the English translation of his German name—as a milkman). Unfortunately, the agents' ineptitude results in Carstairs being floored in an encounter with the Fat Man.
Daphne and Harold attempt to steal the formula back whilst disguised as dancing girls in Hakim's Fun House, where the Fat Man is relaxing. The agents also encounter the mysterious Lila (Dilys Laye), whom they are uncertain if they can trust. With the STENCH henchmen close on their heels, the agents have no other choice but to have Daphne memorize the formula with her photographic memory, before the four of them destroy the formula papers by eating them with soup.
The four agents end up captives of STENCH. Daphne is interrogated by the evil Dr. Crow (played by Judith Furse and voiced by John Bluthal), head of STENCH, but she fails to succumb until she accidentally bumps her head, causing her to reveal the formula. Simpkins, Crump and Bind manage to escape their cell and to collect Daphne and Dr. Crow's tape recording of Daphne's recitation, but are caught up in an underground automated factory process, from which they escape only when Lila pulls a gun on Dr. Crow, forcing her to reverse the process.
Simpkins sets the STENCH base to self-destruct before rushing into a lift with the other agents, as well as Lila and Dr. Crow. As the lift ascends, Lila reveals to Simpkins that she is a double agent working for SNOG (the Society for Neutralising Of Germs) and that she has a crush on him. The lift reaches the surface, which is revealed to be the office of the chief of the Secret Service; the headquarters of STENCH is right below the streets of London. STENCH headquarters self-destructs, choking the chief's office in a thick cloud of smoke.