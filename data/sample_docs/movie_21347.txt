The World's End

Alcoholic Gary King persuades his estranged schoolfriends Peter, Oliver, Steven, and Andy, to complete the "Golden Mile", a pub crawl encompassing the 12 pubs of their hometown of Newton Haven. The group attempted the crawl as teenagers, but failed to reach the final three pubs, including the World's End.
In the second pub, they are joined by Oliver's sister Sam, whose affections Gary and Steven fought over in school. Gary is refused entry to the third pub, having been barred as a teenager, but drinks beer left on a table outside. In the toilets of the fourth pub, Gary picks a fight with a teenager and knocks his head off, exposing him as an android. Gary's friends join him and fight more androids. Realising the town population has been replaced with androids, they decide to continue the pub crawl so as not to arouse suspicion.
At the seventh pub, Gary, Sam and Steven get into a fight with androids impersonating Sam's twin friends. At the eighth pub, androids impersonating girls from their youth attempt to seduce Gary, Andy and Peter, while Basil, a local known for conspiracy theories, explains the details of the android invasion to Steven. At the ninth pub, the group's old schoolteacher Guy Shepherd encourages them to be replaced by androids.
Andy notices that Oliver's birthmark, removed with laser treatment, has re-appeared, and realises he has been replaced with an android; he damages him. Another fight breaks out and the group scatters. Gary and Sam escape and Gary tells her to leave for her safety. The remaining friends accuse each other of having been replaced by androids, but prove their humanity with scars and tattoos the androids lack. The androids capture Peter, but Gary is determined to finish the pub crawl. At the World's End, Andy confronts Gary; he realises that Gary once attempted suicide, and associates his failure to complete the Mile with his failure in adult life.
As Andy tries to stop Gary from drawing his final pint, they discover a hidden chamber and reunite with Steven. A disembodied alien entity, the Network, tells them that the android invasion has been responsible for the technological advances in telecommunication over recent decades as part of a first step to joining a galactic community. It offers them eternal youth by becoming androids, but they refuse. Gary persuades them that humanity is too stupid to join the aliens; exasperated, the Network abandons the invasion. Sam arrives to drive the group out of Newton Haven as it self-destructs.
Some time later, the destruction of Newton Haven has triggered a worldwide electromagnetic pulse that destroyed all electrical power on Earth, setting humanity back to the Dark Ages. The remaining androids have reactivated and are mistrusted by surviving humans. Andy's marriage has recovered, Steven is in a relationship with Sam, and android versions of Peter and Oliver have returned to a semblance of their former lives. In the ruins of Newton Haven, the now-sober Gary enters a pub with the android versions of his younger friends and orders water. When the bartender refuses to serve androids, Gary leads his android friends into a brawl.